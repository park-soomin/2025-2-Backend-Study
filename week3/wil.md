- 스프링 계층형 아키텍처(Layered Architecture)
    - 레포지토리 계층(Repository layer)
        Repository : 데이터베이스에 접근하여 CRUD작업을 수행하는 계층
        - CRUD
            Create : 데이터 생성
            Read : 데이터 조회
            Update : 기존 데이터 수정
            Delete : 데이터 삭제


- 데이터베이스 접근
    애플리케이션 서버는 DB가 이해할 수 있는 SQL을 연결된 커텍션을 통해 DB에 전달
    DB는 전달된 SQL수행, 그 결과 응답, 애플리케이션 서버는 결과 활용
    - 문제점
        반복적인 SQL 코드 작성
        SQL에 의존적 개발
        객체 - 데이터베이스 간 패러다임 불일치
        -> 해결책 : ORM


- ORM(Object-Relational Mapping)
    객체와 관계형 데이터베이스의 데이터를 자동으로 매핑(연결)해주는 것
    객체 - 데이터베이스 간 패러다임 차이 해결
    반복적인 CRUD SQL 자동 처리


- JPA(Java Persistence API)
    자바 진영의 ORM 기술 표준
    자바에서 객체를 DB에 저장 및 관리 위한 인터페이스와 기능 제공하는 API
    대표적 JPA 구현체 : Hibernate

    - 동작 방식
        - EntityManager : 엔티티 객체를 DB와 연결해주는 창구
            JPA 기능 대부분은 EntityManager가 제공
            EntityManager 통해 SQL 직접 작성하지 않고 엔티티를 DB에 등록/수정/조회/삭제 가능
            EntityManager는 엔티티를 영속성 컨텍스트에 저장
        
        - 영속성 컨텍스트
            JPA에서 엔티티를 관리하기 위해서 만들어진 가상 공간
            엔티티 매니저를 통해 영속석 컨텍스트에 접근
            - 엔티티 생명 주기
                비영속 : 영속성 컨텍스트와 관련없는 상태
                영속 : 영속성 컨텍스트에 저장된 상태
                       엔티티가 영속성 컨텍스트에 의해 관리됨
                준영속 : 영속성 컨텍스트에 저장되었다가 분리된 상태
                삭제 : 영속성 컨텍스트에 엔티티가 삭제될거라고 기록한 상태
            - 특징
                - 1차 캐시
                    한 번 조회한 객체를 영속성 컨텍스트가 내부에 저장해 두고 재사용하는 구조
                    이미 저장된 객체를 조회할 때는 DB 거치지 않아도 됨
                - 동일성 보장
                    트랜잭션 안에서는 같은 엔티티를 여러번 조회해도, 영속성 컨텍스트에 보관된 같은 객체를 그대로 반환
                    -> 항상 동일한 객체임을 보장
                - 트랙잭션을 지원하는 쓰기 지연
                    DB에 바로 쓰는 것 X, 변경사항들을 모아두고 트랜잭션이 커밋되는 시점에 한번에 DB에 전송
                    쿼리를 DB에 한 번에 전달할 수 있으므로 DB와의 네트워킹 횟수를 줄여 성능 최적화 가능
                - 변경 감지
                    영속성 컨텍스트가 엔티티의 변경 사항 자동 감지
                    트랜잭션 커밋 시점에 변경 내용을 DB에 반영
                    변경 감지는 영속성 컨텍스트가 관리하는 영속상태의 엔티티에만 적용